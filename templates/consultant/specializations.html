{% extends "base.html" %}

{% block title %}My Specializations - Krishi360{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="fas fa-chart-bar"></i> My Specializations</h2>
                <a href="{{ url_for('consultant.dashboard') }}" class="btn btn-outline-success">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
            </div>

            <p class="text-muted">Track your expertise and performance across different agricultural categories.</p>

            {% if category_stats %}
            <div class="row">
                {% for category, stats in category_stats.items() %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">{{ category.replace('_', ' ').title() }}</h5>
                        </div>
                        <div class="card-body">
                            <div class="row text-center mb-3">
                                <div class="col-4">
                                    <div class="text-success fw-bold fs-4">{{ stats.total }}</div>
                                    <small class="text-muted">Total</small>
                                </div>
                                <div class="col-4">
                                    <div class="text-info fw-bold fs-4">{{ stats.completed }}</div>
                                    <small class="text-muted">Completed</small>
                                </div>
                                <div class="col-4">
                                    <div class="text-warning fw-bold fs-4">
                                        {% if stats.avg_rating > 0 %}
                                            {{ "%.1f"|format(stats.avg_rating) }}
                                        {% else %}
                                            -
                                        {% endif %}
                                    </div>
                                    <small class="text-muted">Avg Rating</small>
                                </div>
                            </div>

                            {% if stats.avg_rating > 0 %}
                            <div class="text-center mb-3">
                                {% for i in range(1, 6) %}
                                    {% if i <= stats.avg_rating %}
                                        <i class="fas fa-star text-warning"></i>
                                    {% else %}
                                        <i class="far fa-star text-warning"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            {% endif %}

                            <div class="progress mb-3">
                                <div class="progress-bar bg-success" role="progressbar" 
                                     style="width: {{ (stats.completed / stats.total * 100) if stats.total > 0 else 0 }}%">
                                    {{ "%.0f"|format((stats.completed / stats.total * 100) if stats.total > 0 else 0) }}%
                                </div>
                            </div>

                            <div class="text-center">
                                <small class="text-muted">
                                    Completion Rate: {{ "%.0f"|format((stats.completed / stats.total * 100) if stats.total > 0 else 0) }}%
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-5">
                <i class="fas fa-chart-bar fa-3x text-muted mb-3"></i>
                <h4 class="text-muted">No specializations data yet</h4>
                <p class="text-muted">Start providing consultations to build your specialization profile.</p>
                <a href="{{ url_for('consultant.available_consultations') }}" class="btn btn-success">
                    <i class="fas fa-plus"></i> Browse Available Requests
                </a>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Tips Section -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-light-green">
                    <h5 class="mb-0">
                        <i class="fas fa-lightbulb me-2"></i>Building Your Expertise
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="fas fa-graduation-cap text-success fa-2x"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Continuous Learning</h6>
                                    <p class="small text-muted mb-0">Stay updated with latest agricultural practices and technologies</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="fas fa-handshake text-success fa-2x"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Quality Responses</h6>
                                    <p class="small text-muted mb-0">Provide detailed, actionable advice to earn better ratings</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="fas fa-target text-success fa-2x"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Specialize & Excel</h6>
                                    <p class="small text-muted mb-0">Focus on specific areas to become a recognized expert</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
